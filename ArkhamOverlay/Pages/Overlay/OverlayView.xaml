<Window x:Class="ArkhamOverlay.Pages.Overlay.OverlayView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:overlay="clr-namespace:ArkhamOverlay.Pages.Overlay" 
        d:DataContext="{d:DesignInstance Type=overlay:OverlayViewModel}"
        mc:Ignorable="d"
        Title="Arkham Overlay" 
        Left = "10"
        Width="{Binding Configuration.OverlayWidth}" 
        MinWidth="{Binding Configuration.OverlayWidth}" 
        MaxWidth="{Binding Configuration.OverlayWidth}" 
        Height="{Binding Configuration.OverlayHeight}" 
        MaxHeight="{Binding Configuration.OverlayHeight}" 
        MinHeight="{Binding Configuration.OverlayHeight}" 
        Background="#00B164">
    <Grid>
        <Grid.Resources>
            <BooleanToVisibilityConverter x:Key="BoolToVisibility" />

            <Style x:Key="CardImage" TargetType="{x:Type Image}" >
                <Setter Property="Margin" Value="5" />
                <Setter Property="Visibility" Value="{Binding Visibility}" />
                <Setter Property="Height" Value="{Binding Height}" />
                <Setter Property="Width" Value="{Binding Width}" />
                <Setter Property="Clip">
                    <Setter.Value>
                        <RectangleGeometry RadiusX="{Binding Radius }"
                                           RadiusY="{Binding Radius }"
                                           Rect="{Binding ClipRect }"/>
                    </Setter.Value>
                </Setter>

                <Style.Triggers>
                    <Trigger Property="Visibility" Value="Visible">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0.0" To="1.0" Duration="0:0:.5"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Grid.Resources>
        <StackPanel Orientation="Vertical" VerticalAlignment="Center" >
            <ItemsControl ItemsSource="{Binding EncounterCards}" HorizontalAlignment="Center">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel></WrapPanel>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Image Style="{StaticResource CardImage}" Source="{Binding CardImage}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <ItemsControl ItemsSource="{Binding PlayerCards}" HorizontalAlignment="Center">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel></WrapPanel>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Image Style="{StaticResource CardImage}" Source="{Binding CardImage}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
        <Grid>
            <ItemsControl 
                ItemsSource="{Binding ActAgendaCards}"
                HorizontalAlignment="Center" 
                VerticalAlignment="Top" 
                Visibility="{Binding Path=ShowActAgendaBar, Converter={StaticResource BoolToVisibility}}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel></WrapPanel>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Image Style="{StaticResource CardImage}" Source="{Binding CardImage}" />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
    </Grid>
</Window>
